<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="dashboard.title">Student Dashboard | Kharis</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css" />
    
    <style>
      .sidebar-right { display: block !important; }
      @media (max-width: 1200px) { .sidebar-right { display: none !important; } }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="mobile-header">
        <div class="mobile-nav">
          <div class="mobile-profile">
            <div class="mobile-avatar" id="mobileAvatarDisplay">KD</div>
            <div class="mobile-name" id="mobileNameDisplay">Loading...</div>
          </div>
          <button class="hamburger" aria-label="Buka Menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
      </div>

      <div class="mobile-menu-overlay"></div>

      <div class="mobile-sidebar">
        <div class="mobile-sidebar-content">
          <div class="profile">
            <div class="avatar">KD</div>
            <div>
              <div class="name">Menu Mobile</div>
              <div class="program">Informatics Engineering</div>
            </div>
          </div>

          <nav>
            <a href="#" class="active" data-section="dashboard" data-i18n="nav.dashboard">Dashboard</a>
            <a href="#" data-section="profile" data-i18n="nav.profile">Profile</a>
            <a href="#" data-section="grades" data-i18n="nav.grades">Grades</a>
            <a href="#" data-section="attendance" data-i18n="nav.attendance">Attendance</a>
            <a href="#" data-section="schedule" data-i18n="nav.schedule">Class Schedule</a>
            <a href="#" data-section="finance"><span data-i18n="nav.finance">Finance</span></a>
            <a href="#" data-section="chat"><span data-i18n="nav.messages">Messages</span></a>
            <a href="#" data-section="settings" data-i18n="nav.settings">Settings</a>
          </nav>

          <button class="logout-btn-mobile" id="logoutBtnMobile" data-i18n="nav.logout">
            Logout
          </button>
        </div>
      </div>

      <aside class="sidebar">
        <div class="profile">
          <div class="avatar" id="desktopAvatarDisplay">KD</div>
          <div>
            <div class="name" id="desktopNameDisplay">Loading...</div>
            <div class="program" id="desktopProgramDisplay">Informatics Engineering ‚Ä¢ 2023</div>
          </div>
        </div>
        <nav>
          <a href="#" class="active" data-section="dashboard" data-i18n="nav.dashboard">Dashboard</a>
          <a href="#" data-section="profile" data-i18n="nav.profile">Profile</a>
          <a href="#" data-section="grades" data-i18n="nav.grades">Grades</a>
          <a href="#" data-section="attendance" data-i18n="nav.attendance">Attendance</a>
          <a href="#" data-section="schedule" data-i18n="nav.schedule">Class Schedule</a>
          <a href="#" data-section="finance"><span data-i18n="nav.finance">Finance</span></a>
          <a href="#" data-section="chat"><span data-i18n="nav.messages">Messages</span></a>
          <a href="#" data-section="settings" data-i18n="nav.settings">Settings</a>
        </nav>
        <button class="logout-btn" id="logoutBtn" data-i18n="nav.logout">
          Logout
        </button>
      </aside>

      <div class="fab-container" id="fabContainer">
        <div class="fab-items">
          <button class="fab-item" id="kanbanFab" title="Tugas Saya"><span class="fab-label">Tugas</span>üìù</button>
          <button class="fab-item" id="notesFab" title="Catatan"><span class="fab-label">Catatan</span>üìí</button>
          <button class="fab-item" id="codeFab" title="Kode Editor"><span class="fab-label">Kode</span>üíª</button>
          <button class="fab-item" id="chatbotFab" title="Asisten AI"><span class="fab-label">AI Chat</span>ü§ñ</button>
        </div>
        <button class="fab-trigger" id="fabTrigger">‚ûï</button>
      </div>

      <div class="main-wrapper">
        <main class="main-content">
          
          <section class="section" id="dashboard">
            <header class="main-header">
              <h1 data-i18n="dashboard.title">Dashboard</h1>
              <div data-i18n="dashboard.welcome">Welcome back,</div>
            </header>

            <section class="cards">
              <div class="card">
                <div class="card-title" data-i18n="dashboard.gpa">IPK</div>
                <div class="card-value">3.42</div>
                <div class="card-subtitle" data-i18n="dashboard.weighted_average">Weighted Average</div>
              </div>
              <div class="card">
                <div class="card-title" data-i18n="dashboard.credits">Credits</div>
                <div class="card-value">13</div>
                <div class="card-subtitle" data-i18n="dashboard.this_semester">This Semester</div>
              </div>
              <div class="card">
                <div class="card-title" data-i18n="dashboard.attendance">Attendance</div>
                <div class="card-value">85%</div>
                <div class="card-subtitle" data-i18n="dashboard.overall">Overall</div>
              </div>
              <div class="card">
                <div class="card-title" data-i18n="dashboard.active_courses">Active Courses</div>
                <div class="card-value">4</div>
                <div class="card-subtitle" data-i18n="dashboard.now">Now</div>
              </div>
            </section>

            <section class="main-section">
              <div class="chart-section">
                <div class="chart-header">
                  <h2 data-i18n="dashboard.learning_progress">Learning Progress</h2>
                  <select id="courseSelect">
                    <option value="programming">Intro to Programming</option>
                    <option value="math">Discrete Math</option>
                    <option value="algorithms">Algorithms</option>
                    <option value="database">Databases</option>
                  </select>
                </div>
                <canvas id="progressChart"></canvas>
              </div>

              <div class="grades-section">
                <h2 data-i18n="dashboard.courses_grades">Courses & Grades</h2>
                <div class="grades-list">
                  <div class="grade-row">
                    <div class="grade-info">
                      <div class="grade-course">Intro to Programming</div>
                      <div class="grade-info-text">CS101 ‚Ä¢ 3 credits</div>
                    </div>
                    <div class="grade-score">88</div>
                  </div>
                  </div>
              </div>
            </section>
          </section>

          <section class="section" id="profile" style="display: none">
            <h2 data-i18n="profile.title">Profile</h2>
            <div class="profile-info">
              <div class="info-item">
                <span class="info-label" data-i18n="profile.name">Name:</span>
                <span class="info-value" id="profileDetailName">Loading...</span>
              </div>
              <div class="info-item">
                <span class="info-label" data-i18n="profile.nim">NIM:</span>
                <span class="info-value" id="profileDetailNim">-</span>
              </div>
              <div class="info-item">
                <span class="info-label" data-i18n="profile.program">Program:</span>
                <span class="info-value" id="profileDetailProgram">Informatics Engineering</span>
              </div>
              <div class="info-item">
                <span class="info-label" data-i18n="profile.year">Year:</span>
                <span class="info-value" id="profileDetailYear">2023</span>
              </div>
              <div class="info-item">
                <span class="info-label" data-i18n="profile.semester">Semester:</span>
                <span class="info-value" id="profileDetailSemester">4</span>
              </div>
              <div class="info-item">
                <span class="info-label" data-i18n="profile.email">Email:</span>
                <span class="info-value" id="profileDetailEmail">loading@example.ac.id</span>
              </div>
            </div>
          </section>

          <section class="section" id="grades" style="display: none">
            <h2 data-i18n="grades.title">Grades</h2>
            <div class="gpa-calculator-results" id="gpaResultsContainer">
               <h3>Hasil Perhitungan</h3>
               <div class="gpa-stats">
                  <div class="stat-item"><span class="stat-value" id="gpaValueIPS">-</span><span class="stat-label">IPS</span></div>
                  <div class="stat-item"><span class="stat-value" id="gpaValueIPK">-</span><span class="stat-label">IPK</span></div>
               </div>
            </div>
            <button class="submit-code-btn" id="calculateGpaBtn">Hitung IPK/IPS</button>
            <div class="grades-list" id="dynamicGradesList"></div>
          </section>

          <section class="section" id="attendance" style="display: none">
             <div class="breadcrumb" id="attendanceBreadcrumb"><span class="breadcrumb-item active">Attendance</span></div>
             <div id="courseListView">
               <h2>Select Course</h2>
               <div class="courses-grid">
                 <div class="course-card" data-course="algorithms"><h3>Algorithms</h3><p>GL303</p></div>
                 <div class="course-card" data-course="databases"><h3>Databases</h3><p>DB204</p></div>
                 <div class="course-card" data-course="webdev"><h3>Web Dev</h3><p>WD305</p></div>
                 <div class="course-card" data-course="softwareeng"><h3>Software Eng</h3><p>SE401</p></div>
               </div>
             </div>
             <div id="courseDetailView" style="display: none">
                <div class="detail-header"><button class="back-btn" id="backToCourseList">Back</button></div>
                <div class="course-tabs"><button class="tab-btn active" data-tab="attendance">Attendance</button><button class="tab-btn" data-tab="tasks">Tasks</button><button class="tab-btn" data-tab="materials">Materials</button></div>
                <div class="tab-content active" id="attendanceTab"><div class="attendance-details"><div class="table-body" id="attendanceTableBody"></div></div></div>
                <div class="tab-content" id="tasksTab"><div class="tasks-list" id="tasksList"></div></div>
                <div class="tab-content" id="materialsTab"><div class="materials-list" id="materialsList"></div></div>
             </div>
             <div id="codeInputView" style="display: none"><div class="code-input-container"><input id="attendanceCode"/><button id="submitCodeBtn">Submit</button><div id="codeMessage"></div><button id="backToDetail">Back</button></div></div>
             <div id="taskSubmissionView" style="display: none"><div class="task-submission-container"><input type="file" id="submissionFile"/><button id="submitTaskBtn">Submit</button><button id="cancelSubmissionBtn">Cancel</button><button id="backToDetailFromTask">Back</button></div></div>
          </section>

          <section class="section" id="schedule" style="display: none">
             <header class="main-header"><h1>Class Schedule</h1></header>
             <div class="schedule-filters"><select id="dayFilter"><option value="all">All Days</option></select></div>
             <div class="weekly-schedule">
               <div class="schedule-day" data-day="monday"><div class="day-header"><h3>Monday</h3></div><div class="class-list"></div></div>
               <div class="schedule-day" data-day="tuesday"><div class="day-header"><h3>Tuesday</h3></div><div class="class-list"></div></div>
             </div>
          </section>

          <section id="finance" class="section" style="display: none">
             <h1>Keuangan</h1>
             <div class="finance-summary">
                <div class="summary-card"><div class="summary-value" id="totalBill">Rp -</div></div>
                <div class="summary-card"><div class="summary-value" id="totalPaid">Rp -</div></div>
                <div class="summary-card"><div class="summary-value" id="remainingBill">Rp -</div></div>
                <div class="summary-card"><span id="paymentStatus">Status</span></div>
             </div>
             <div class="finance-tabs"><button class="finance-tab-btn active" data-tab="bills" onclick="switchFinanceTab('bills')">Tagihan</button><button class="finance-tab-btn" data-tab="history" onclick="switchFinanceTab('history')">Riwayat</button><button class="finance-tab-btn" data-tab="methods" onclick="switchFinanceTab('methods')">Metode</button><button class="finance-tab-btn" data-tab="scholarships" onclick="switchFinanceTab('scholarships')">Beasiswa</button></div>
             <div id="billsTab" class="finance-tab-content active"><div id="billsTableBody"></div></div>
             <div id="historyTab" class="finance-tab-content"><div id="historyTableBody"></div></div>
             <div id="methodsTab" class="finance-tab-content"><div id="paymentMethodsGrid"></div></div>
             <div id="scholarshipsTab" class="finance-tab-content"><div id="scholarshipsContainer"></div></div>
          </section>

          <section class="section" id="notes" style="display: none">
             <h1>Catatan</h1>
             <div class="notes-container"><div id="notesList"></div><input id="noteTitle"/><textarea id="noteContent"></textarea><span id="saveStatus"></span><span id="noteDate"></span></div>
          </section>

          <section class="section" id="kanban" style="display: none">
             <h1>Tugas Pribadi</h1>
             <div class="kanban-board">
                <div class="kanban-column" id="col-todo"><div class="task-list" id="list-todo"></div><span id="count-todo"></span></div>
                <div class="kanban-column" id="col-progress"><div class="task-list" id="list-progress"></div><span id="count-progress"></span></div>
                <div class="kanban-column" id="col-done"><div class="task-list" id="list-done"></div><span id="count-done"></span></div>
             </div>
          </section>

          <section class="section" id="chatbot" style="display: none">
             <h1>Asisten AI</h1>
             <div class="chatbot-fullpage-wrapper"><div id="chatbotMessages"></div><input id="chatbotInput"/><button id="chatbotSendBtn">Send</button><button id="scrollToBottomBtn">‚¨á</button></div>
          </section>

          <section id="codeplayground" class="section" style="display: none">
             <h1>Code Playground</h1>
             <select id="codeLanguageSelect"><option value="python">Python</option></select>
             <button id="runCode">Run</button><button id="clearOutput">Clear</button>
             <div id="codeEditor"></div><div id="outputResult"></div>
          </section>

          <section class="section" id="chat" style="display: none">
             <h1>Chat Grup</h1>
             <div id="groupMessages"></div><input id="groupMessageInput"/><button id="sendGroupMessageBtn">Send</button>
          </section>

          <section class="section" id="settings" style="display: none">
             <h2>Settings</h2>
             <select id="languageSelect"><option value="en">English</option><option value="id">Indonesian</option></select>
             <select id="profileVisibility"><option value="public">Public</option></select>
             <input type="checkbox" id="emailNotifications">
             <input type="checkbox" id="darkMode">
             <button class="save-settings">Save</button>
          </section>

        </main>

        <aside class="sidebar-right">
          <div class="student-info">
            <h3 id="rightSidebarName">Loading...</h3>
            <p id="rightSidebarNim">NIM: -</p>
            <p id="rightSidebarProgram">Informatics Engineering</p>
            
            <p data-i18n="dashboard.semester_progress">Semester Progress</p>
            <div class="progress-bg">
              <div class="progress-bar" style="width: 72%"></div>
            </div>
            <div class="progress-text">72% Complete</div>
          </div>

          <div class="attendance">
            <h3>Quick Attendance</h3>
            <div class="attendance-stats">
              <div class="stat-item"><span class="stat-value">85%</span><span class="stat-label">This Semester</span></div>
              <div class="stat-item"><span class="stat-value">47/56</span><span class="stat-label">Meetings</span></div>
            </div>
            <div class="attendance-warning"><span class="warning-icon">‚ö†Ô∏è</span><span>9 absences remaining</span></div>
          </div>

          <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="actions">
              <button>Download Transcript</button>
              <button>Request Leave</button>
              <button>Contact Advisor</button>
              <button>View Schedule</button>
            </div>
          </div>

          <div class="quick-settings">
             <h3>Quick Settings</h3>
             <div class="dark-mode-toggle"><label class="toggle-label"><input type="checkbox" id="quickDarkMode"><span class="toggle-slider"></span><span class="toggle-text">Dark Mode</span></label></div>
          </div>
        </aside>
      </div>
    </div>

    <div id="leaveModal" class="modal-overlay" style="display: none"><div class="modal-content"><h3>Leave</h3><input id="leaveDate"/><textarea id="leaveReason"></textarea><button id="cancelLeaveBtn">Cancel</button><button>Submit</button></div></div>
    <div id="addTaskModal" class="modal-overlay" style="display: none"><div class="modal-content"><h3>Add Task</h3><input id="newTaskTitle"/><select id="newTaskTag"></select><button onclick="closeAddTaskModal()">Cancel</button><button onclick="addNewKanbanTask()">Save</button></div></div>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
